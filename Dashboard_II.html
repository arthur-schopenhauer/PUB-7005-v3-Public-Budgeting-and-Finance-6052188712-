<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>County of San Diego Budget — FY 2023–24 to 2025–26 (Infographic)</title>
<style>
  :root{
    --bg:#0b1020;          /* deep navy */
    --panel:#121832;       /* card background */
    --ink:#e7ecff;         /* primary text */
    --muted:#a8b2d1;       /* secondary text */
    --accent:#8ad0ff;      /* accent line */
    --subtle:#253055;      /* gridlines */
    --chip:#1c2447;
  }
  html,body{height:100%;}
  body{
    margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
    background: radial-gradient(1000px 600px at 10% -10%, #1a2260 0%, var(--bg) 50%) fixed;
    color:var(--ink);
  }
  .wrap{max-width:auto; margin:0 auto; padding:28px 20px 40px;}
  header{display:grid; grid-template-columns:1fr auto; gap:16px; align-items:center; margin-bottom:18px;}
  .title{font-size:clamp(22px, 3.2vw, 38px); font-weight:800; letter-spacing:.2px;}
  .subtitle{color:var(--muted); font-weight:500; margin-top:6px;}
  .legend{display:flex; flex-wrap:wrap; gap:10px;}
  .chip{background:var(--chip); border:1px solid var(--subtle); color:var(--muted); padding:6px 10px; border-radius:999px; font-size:12px}

  .grid{display:grid; grid-template-columns: 1.1fr 1fr; gap:18px;}
  @media (max-width: 980px){ .grid{grid-template-columns: 1fr;}}

  .card{background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.00)); border:1px solid var(--subtle); border-radius:18px; padding:18px; box-shadow: 0 10px 25px rgba(0,0,0,.25)}

  /* Chart area */
  .chart{height:520px; position:relative}
  .y-grid{position:absolute; left:0; right:0; top:0; bottom:0;}
  .y-grid div{position:absolute; left:0; right:0; border-top:1px dashed #2f3969;}
  .bars{position:absolute; inset:0; display:flex; align-items:flex-end; gap:18px; padding:42px 14px 50px 70px}
  .cat{flex:1; display:grid; grid-template-rows:1fr auto; gap:8px}
  .group{display:flex; align-items:flex-end; gap:8px; justify-content:center}
  .bar{width:22px; border-radius:6px 6px 4px 4px; background:linear-gradient(180deg, rgba(138,208,255,.95), rgba(138,208,255,.35)); outline:1px solid rgba(138,208,255,.4)}
  .bar[data-year="FY24"]{background:linear-gradient(180deg, rgba(166,255,196,.95), rgba(166,255,196,.4)); outline-color: rgba(166,255,196,.5)}
  .bar[data-year="FY26"]{background:linear-gradient(180deg, rgba(255,215,141,.95), rgba(255,215,141,.4)); outline-color: rgba(255,215,141,.5)}
  .x-label{font-size:12px; text-align:center; color:var(--muted)}
  .y-label{position:absolute; top:12px; left:12px; font-size:12px; color:var(--muted)}
  .axis-num{position:absolute; left:8px; transform:translateY(50%); font-size:11px; color:#8ea0d9}

  .note{font-size:12px; color:var(--muted)}

  /* Annotations */
  .annotations{display:grid; gap:10px}
  .callout{display:flex; gap:12px; background:var(--panel); border:1px solid var(--subtle); border-radius:14px; padding:14px}
  .callout p{margin:0; font-size:14px; color:#cfdaff}
  .bullet{width:22px; height:22px; border-radius:6px; background:var(--chip); border:1px solid var(--subtle); display:grid; place-items:center; font-weight:700; color:var(--accent)}

  /* Totals table */
  table{width:100%; border-collapse:separate; border-spacing:0; overflow: scroll; border:1px solid var(--subtle); border-radius:14px}
  th,td{padding:10px 12px; font-size:13px}
  thead th{background:var(--panel); color:#d9e4ff; text-align:right}
  thead th:first-child, tbody td:first-child{ text-align:left }
  tbody tr:nth-child(odd){ background:rgba(255,255,255,.025) }
  tfoot td{color:var(--muted)}
  .pct{color:#9fd0ff}

  /* Print: Legal 8.5x14 portrait with trim guides for fold-in-three */
  @page { size: 8.5in 14in; margin: 0.5in }
  @media print{
    body{background:#fff}
    .card{box-shadow:none}
    .no-print{display:none}
    .fold-guides{position:fixed; left:0; right:0; top:calc(14in/3); height:0; border-top:1px dashed #9aa4c3}
    .fold-guides::after{content:""; position:absolute; top:calc(14in/3); left:0; right:0; border-top:1px dashed #9aa4c3}
  }
</style>
</head>
<body>
<div class="wrap">
  <header>
    <div>
      <div class="title">County of San Diego — Budget by Functional Area</div>
      <div class="subtitle">FY 2023–24 (Revised), FY 2024–25 (Revised), FY 2025–26 (Revised) — amounts in $ millions</div>
      <div class="legend" style="margin-top:12px">
        <span class="chip">Functional Areas: Public Safety • Health & Human Services • Land Use & Environment • Finance & General Government • Finance Other • Capital Program</span>
        <span class="chip">Bars: <strong>FY23–24</strong> (blue) • <strong>FY24–25</strong> (green) • <strong>FY25–26</strong> (gold)</span>
      </div>
    </div>
    <div class="no-print" style="text-align:right">
      <button onclick="window.print()" style="background:var(--chip); color:var(--ink); border:1px solid var(--subtle); border-radius:12px; padding:10px 14px; cursor:pointer">Print (Legal 8.5×14)</button>
    </div>
  </header>

  <section class="grid">
    <div class="card">
      <div class="chart" id="chart">
        <div class="y-label">Appropriations (millions)</div>
        <div class="y-grid" id="ygrid"></div>
        <div class="bars" id="bars"></div>
      </div>
      <div class="note">Source data taken from the County’s official CAO Change Letters (FY 2023–24 & 2024–25; FY 2024–25 & 2025–26). Hover bars for exact values. Designed for print on legal paper and foldable in three sections.</div>
    </div>

    <div class="card annotations">
      <h3 style="margin:0 0 6px 0; font-size:16px">How the County researches budget needs</h3>
      <div class="callout"><div class="bullet">1</div><p><strong>Community input</strong> via Engage San Diego County, open houses, surveys, and budget hearings.</p></div>
      <div class="callout"><div class="bullet">2</div><p><strong>Board direction</strong> & strategic plan alignment guide priorities across groups.</p></div>
      <div class="callout"><div class="bullet">3</div><p><strong>Data-driven analysis</strong> of service demand, outcomes, and performance metrics.</p></div>
      <div class="callout"><div class="bullet">4</div><p><strong>Mandates & policy</strong> (State/Federal) including Medi‑Cal, CalFresh, CalWORKs, public safety statutes.</p></div>
      <div class="callout"><div class="bullet">5</div><p><strong>Funding & economic conditions</strong> — revenue outlook, grants, capital and maintenance needs.</p></div>
      <div class="note">See cited “Budget at a Glance” sections and “How the Budget is Shaped” page for methodology details.</div>
    </div>
  </section>

  <section class="card" style="margin-top:18px">
    <h3 style="margin:0 0 10px 0; font-size:16px">Totals by Functional Area ($ millions)</h3>
    <table id="table"></table>
  </section>

  <div class="fold-guides"></div>
</div>

<script>
// Data from official CAO Change Letters
// FY 2023–24 & 2024–25 Revised (Change Letter FY23–24 & FY24–25)
// FY 2025–26 Revised (Change Letter FY24–25 & FY25–26)
const categories = [
  "Health & Human Services",
  "Public Safety",
  "Finance & General Government",
  "Land Use & Environment",
  "Finance Other",
  "Capital Program",
];
const data = {
  "FY23": {
    label: "FY23–24 (Revised)",
    values: {
      "Health & Human Services": 3195.4,
      "Public Safety": 2687.9,
      "Finance & General Government": 889.6,
      "Land Use & Environment": 674.4,
      "Finance Other": 459.7,
      "Capital Program": 258.9,
    }
  },
  "FY24": {
    label: "FY24–25 (Revised)",
    values: {
      "Health & Human Services": 3179.9,
      "Public Safety": 2595.2,
      "Finance & General Government": 857.9,
      "Land Use & Environment": 648.3,
      "Finance Other": 360.7,
      "Capital Program": 8.9,
    }
  },
  "FY26": {
    label: "FY25–26 (Revised)",
    values: {
      "Health & Human Services": 3343.0,
      "Public Safety": 2738.1,
      "Finance & General Government": 925.2,
      "Land Use & Environment": 685.6,
      "Finance Other": 383.4,
      "Capital Program": 8.8,
    }
  }
};


//Accomodate chart in viewab

// Compute max for grid scaling
const maxVal = Math.max(
  ...categories.flatMap(cat => [data.FY23.values[cat], data.FY24.values[cat], data.FY26.values[cat]])
);

// Build Y grid (round up to nearest 500)
const step = 1000;
const yMax = Math.ceil(maxVal/step)*step;
const ygrid = document.getElementById('ygrid');
for(let y=0; y<=yMax; y+=step){
  const line = document.createElement('div');
  line.style.bottom = (y/yMax*100)+'%';
  const lbl = document.createElement('div');
  lbl.className = 'axis-num';
  lbl.style.bottom = (y/yMax*100)+'%';
  lbl.textContent = y.toLocaleString();
  ygrid.appendChild(line);
  ygrid.appendChild(lbl);
}

// Bars
const bars = document.getElementById('bars');
categories.forEach(cat =>{
  const catDiv = document.createElement('div');
  catDiv.className = 'cat';
  const group = document.createElement('div');
  group.className = 'group';

  [
    {key:'FY23', w:22},
    {key:'FY24', w:22},
    {key:'FY26', w:22}
  ].forEach(({key,w})=>{
    const val = data[key].values[cat];
    const b = document.createElement('div');
    b.className = 'bar';
    b.dataset.year = key;
    b.style.height = (val/yMax*1000)+'%';
    b.style.width = w+'px';
    b.title = `${cat} — ${data[key].label}: $${val.toLocaleString()}M`;
    group.appendChild(b);
  });

  const xlab = document.createElement('div');
  xlab.className = 'x-label';
  xlab.textContent = cat;

  catDiv.appendChild(group);
  catDiv.appendChild(xlab);
  bars.appendChild(catDiv);
});

// Table
const table = document.getElementById('table');
const thead = document.createElement('thead');
const trh = document.createElement('tr');
['Functional Area','FY23–24','FY24–25','FY25–26','Δ FY26 vs FY23'].forEach(h=>{
  const th=document.createElement('th'); th.textContent=h; trh.appendChild(th);
});
thead.appendChild(trh); table.appendChild(thead);
const tbody = document.createElement('tbody');
categories.forEach(cat=>{
  const tr = document.createElement('tr');
  const ctd = document.createElement('td'); ctd.textContent=cat; tr.appendChild(ctd);
  const v23 = data.FY23.values[cat];
  const v24 = data.FY24.values[cat];
  const v26 = data.FY26.values[cat];
  [v23,v24,v26].forEach(v=>{ const td=document.createElement('td'); td.style.textAlign='right'; td.textContent = v.toLocaleString(undefined,{maximumFractionDigits:1}); tr.appendChild(td); });
  const delta = v26 - v23; const tdD=document.createElement('td'); tdD.style.textAlign='right'; tdD.innerHTML = `${delta>=0?'+':''}${delta.toLocaleString(undefined,{maximumFractionDigits:1})}`; tr.appendChild(tdD);
  tbody.appendChild(tr);
});

// totals row
const trT = document.createElement('tr');
const tdLabel = document.createElement('td'); tdLabel.innerHTML='<strong>Total</strong>'; trT.appendChild(tdLabel);
function sum(obj){return Object.values(obj).reduce((a,b)=>a+b,0)}
const t23 = sum(data.FY23.values), t24=sum(data.FY24.values), t26=sum(data.FY26.values);
[t23,t24,t26,(t26-t23)].forEach((v,i)=>{ const td=document.createElement('td'); td.style.textAlign='right'; td.innerHTML = `<strong>${(i<3? v.toLocaleString(undefined,{maximumFractionDigits:1}) : (v>=0?'+':'')+v.toLocaleString(undefined,{maximumFractionDigits:1}))}</strong>`; trT.appendChild(td); });
const tfoot=document.createElement('tfoot'); tfoot.appendChild(trT); table.appendChild(tbody); table.appendChild(tfoot);
</script>
</body>
</html>
